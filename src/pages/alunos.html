<!DOCTYPE html>
<html lang="pt-br" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="icon"
      type="image/png"
      href="https://images.vexels.com/media/users/3/143402/isolated/preview/afbbf15d5e82a1c4fb5a55c4eacf3003-icone-de-chapeu-de-formatura.png"
    />

    <title>Alunos - Sistema de Controle Acadêmico</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />

    <script src="../js/alunos.js"></script>
    <script>
      function handleInput(event, regex, format) {
        event.target.value = event.target.value
          .replace(/\D/g, "")
          .replace(regex, format);
      }
    </script>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="../public/index.html">
          <img
            src="https://images.vexels.com/media/users/3/143402/isolated/preview/afbbf15d5e82a1c4fb5a55c4eacf3003-icone-de-chapeu-de-formatura.png"
            alt="Logo"
            width="30"
            height="24"
            class="d-inline-block align-text-top"
          />

          Sistema de Controle Acadêmico
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#">Alunos</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/despesas.html">Despesas</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/disciplinas.html">
                Disciplinas
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/matriculas.html">Matriculas</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/turmas.html">Turmas</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/vagas.html">Vagas</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../pages/horario.html">Horários</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Alunos -->
    <main class="container mt-4">
      <div class="container-fluid d-flex flex-column">
        <h3 class="text-center">Lista de Alunos</h3>

        <button
          type="button"
          class="btn btn-dark align-self-end p-1 mt-3"
          data-bs-toggle="modal"
          data-bs-target="#studentModal"
          onclick="handleNewStudent()"
        >
          Novo Aluno
        </button>
      </div>

      <div
        class="
          container-fluid
          d-flex
          justify-content-center
          align-items-center
          mt-3
        "
      >
        <table class="table table-hover text-center">
          <thead>
            <tr>
              <th scope="col">RA</th>
              <th scope="col">Nome</th>
              <th scope="col">CPF</th>
              <th scope="col">Data de Nascimento</th>
              <th scope="col">Endereço</th>
              <th scope="col">Telefone</th>
              <th scope="col">E-mail</th>
            </tr>
          </thead>

          <tbody id="studentsTableBody">
            <tr
              onclick="handleSelectStudent()"
              data-bs-toggle="modal"
              data-bs-target="#studentModal"
            >
              <td>Carregando...</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <!-- Modal Alunos -->
    <div
      id="studentModal"
      class="modal fade"
      tabindex="-1"
      aria-labelledby="studentModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 id="studentModalLabel" class="modal-title fs-5">
              Carregando...
            </h1>

            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Fechar"
            ></button>
          </div>

          <div class="modal-body">
            <div
              id="studentModalControlButtonGroup"
              class="container btn-group text-center mb-3"
              role="group"
              aria-label="Botões de controle do aluno"
              style="display: none"
            >
              <input
                type="radio"
                class="btn-check"
                name="studentModalControlButton"
                id="studentModalControlEditButton"
                autocomplete="off"
                onclick="handleStudentControl()"
              />

              <label
                class="btn btn-outline-primary"
                for="studentModalControlEditButton"
              >
                Editar
              </label>

              <input
                type="radio"
                class="btn-check"
                name="studentModalControlButton"
                id="studentModalControlDeleteButton"
                autocomplete="off"
                onclick="handleStudentControl()"
              />

              <label
                class="btn btn-outline-danger"
                for="studentModalControlDeleteButton"
              >
                Deletar
              </label>
            </div>

            <form class="container needs-validation" novalidate>
              <div class="row g-3 mb-3">
                <div class="col-md-12 d-flex flex-column">
                  <label for="studentModalNameInput" class="form-label">
                    Nome
                  </label>

                  <input
                    type="text"
                    name="studentModalNameInput"
                    id="studentModalNameInput"
                    class="form-control studentModalFormInput"
                    placeholder="Nome do aluno"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">Informe o nome do aluno!</div>
                </div>
              </div>

              <div class="row g-3 mb-3">
                <div class="col-md-6 d-flex flex-column">
                  <label for="studentModalCpfInput" class="form-label">
                    CPF
                  </label>

                  <input
                    type="text"
                    name="studentModalCpfInput"
                    id="studentModalCpfInput"
                    class="form-control studentModalFormInput"
                    placeholder="123.456.789-10"
                    maxlength="11"
                    onkeyup="handleInput(
                      event,
                      /(\d{3})(\d{3})(\d{3})(\d{2})/,
                      '$1.$2.$3-$4'
                    )"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">Informe o CPF do aluno!</div>
                </div>

                <div class="col-md-6 d-flex flex-column">
                  <label for="studentModalBirthdayInput" class="form-label">
                    Data de Nascimento
                  </label>

                  <input
                    type="date"
                    name="studentModalBirthdayInput"
                    id="studentModalBirthdayInput"
                    class="form-control studentModalFormInput"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">
                    Informe a data de nascimento do aluno!
                  </div>
                </div>
              </div>

              <div class="row g-3 mb-3">
                <div class="col-md-12 d-flex flex-column">
                  <label for="studentModalAddressInput" class="form-label">
                    Endereço
                  </label>

                  <input
                    type="text"
                    name="studentModalAddressInput"
                    id="studentModalAddressInput"
                    class="form-control studentModalFormInput"
                    placeholder="Endereço onde o aluno reside"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">
                    Informe o endereço do aluno!
                  </div>
                </div>
              </div>

              <div class="row g-3 mb-3">
                <div class="col-md-6 d-flex flex-column">
                  <label for="studentModalTelInput" class="form-label">
                    Telefone
                  </label>

                  <input
                    type="tel"
                    name="studentModalTelInput"
                    id="studentModalTelInput"
                    class="form-control studentModalFormInput"
                    placeholder="(18) 99999-9999"
                    maxlength="11"
                    onkeyup="handleInput(
                      event,
                      /(\d{2})(\d{5})(\d{4})/,
                      '($1) $2-$3'
                    )"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">
                    Informe o telefone do aluno!
                  </div>
                </div>

                <div class="col-md-6 d-flex flex-column">
                  <label for="studentModalEmailInput" class="form-label">
                    E-mail
                  </label>

                  <input
                    type="email"
                    name="studentModalEmailInput"
                    id="studentModalEmailInput"
                    class="form-control studentModalFormInput"
                    placeholder="aluno@email.com"
                    required
                    disabled
                  />

                  <div class="invalid-feedback">Informe o e-mail do aluno!</div>
                </div>
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>

            <button
              type="submit"
              id="studentModalSaveButton"
              class="btn btn-primary"
              onclick="handleSubmit(event)"
              disabled
            >
              Salvar
            </button>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"
      integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
